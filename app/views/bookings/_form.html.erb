<%= simple_form_for [@article, @booking] do |f| %>

  <!-- USER INPUTS: DATES -->
  <%= f.input :start_date, required: true, as: :string, input_html: {class: "datepicker", id: "start"} %>
  <%= f.input :end_date, required: true, as: :string, input_html: {class: "datepicker", id: "end"} %>

  <hr>
  <p id="price_per_day">Price per day: £ <%= @article.price %></p>
  <%= f.submit disabled: true, class: "btn-form-unpolarise", id: "submit-booking" %>
<% end %>

<!-- ANIMATION -->
<% content_for(:after_js) do %>
  <script>
    $(document).ready(function() {

      $(".datepicker").on("change", function() {

        // Clear previous price information displayed in case the user selects new dates
        $('#price_per_day').empty();

        // Calculate price information
        var start = Date.parse($('#start').val());
        var end = Date.parse($('#end').val());
        var price = <%= @article.price %>;

        // Check if inputs are valid
        if ( start && end && end > start ) {

          // Enable submit
          $('#submit-booking').attr('disabled', false);

          // Display price information
          var days = Math.round((end - start) / (1000 * 60 * 60 * 24));
          var total = days * price;
          var display_days = "<p>Total days: " + days + "</p>";
          var display_price = "<hr><p><strong>Total price: £ " + total + "</strong></p>";
          $('#price_per_day').prepend(display_days);
          $('#price_per_day').append(display_price);
        };

      })
    });
  </script>
<% end %>








